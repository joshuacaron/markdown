<polymer-element name="settings-pane" layout vertical attributes="settings">
  <template>
    <style>
 
      @media (max-width:649px){
        #settingsWrapper {
          width:95vw !important;
        }
      }

      #settingsWrapper {
        width:650px;
        padding:30px 0px;
        font-size:16px;
        font-family:"Open Sans";
        margin:0 auto;
      }

      #settingsOverview {
        padding:15px 30px 30px;
        border-bottom:solid 1px #e0e0e0;
        font-size:16px;
        text-align: center;
      }

      paper-toggle-button {
        margin-bottom:-10px;
      }

      paper-toggle-button::shadow [checked] .toggle {
        background-color: #F50057;
      }

      paper-toggle-button::shadow [checked] .toggle-ink {
        color: #F50057;
      }

      core-label {
        margin-bottom:20px;
      }

      paper-input {
        width:50px;
      }

      paper-input /deep/ .focused-underline {
        background-color: #F50057;
      }


      paper-slider::shadow #sliderBar::shadow #activeProgress {
        background-color: #F50057;
      }

      paper-slider::shadow #sliderKnobInner {
        background-color: #F50057;
      }

      paper-slider::shadow #sliderKnobInner::before {
        background-color: #F50057;
      }
    </style>
    
    <p id="settingsOverview">Any settings you change are automatically saved. Feel free to close the tab with <i>Ctrl+w</i> after you are done.</p>
    <div id="settingsWrapper" cross-fade flex layout vertical>
      <core-label for layout horizontal wrap>
        <span flex>Synchronize scrolling between panels</span>
        <paper-toggle-button checked="{{settings.syncedScrolling}}"></paper-toggle-button>
      </core-label>
      <core-label for layout horizontal>
        <span flex>Window always on top</span>
        <paper-toggle-button checked="{{settings.alwaysOnTop}}"></paper-toggle-button>
      </core-label>
      <core-label for layout horizontal>
        <span flex>Font size</span>
        <paper-input value="{{settings.fontSize}}"></paper-input>
      </core-label>
      <core-label for layout horizontal>
        <span flex>Use Monospaced Font for Markdown</span>
        <paper-toggle-button checked="{{settings.monospaceFont}}"></paper-toggle-button>
      </core-label>
      <core-label for layout horizontal>
        <span flex>Auto Save</span>
        <paper-toggle-button checked="{{settings.autosaveEnabled}}"></paper-toggle-button>
      </core-label>
      <core-label for layout vertical>
        <span>Auto Save Interval (minutes)</span>
        <div layout horizontal>
          <paper-slider flex min="1" max="30" editable value="{{settings.autosaveInterval}}"></paper-slider>
        </div>
      </core-label>
      <core-label for layout horizontal>
        <span flex>Render LaTeX code</span>
        <paper-toggle-button checked="{{settings.renderLaTeX}}"></paper-toggle-button>
      </core-label>
      <core-label for layout horizontal>
        <span flex>Use Maruku markdown syntax (instead of Gruber)</span>
        <paper-toggle-button checked="{{settings.useMaruku}}"></paper-toggle-button>
      </core-label>
      <core-label for layout horizontal>
        <span flex>Highlight syntax in code blocks</span>
        <paper-toggle-button checked="{{settings.highlightSyntax}}"></paper-toggle-button>
      </core-label>
    </div>
  </template>
  <script>
      Polymer('settings-pane', {
        settings:{},
        observe:{
          'settings.syncedScrolling': 'settingsUpdated',
          'settings.alwaysOnTop': 'onTopSettingUpdated',
          'settings.fontSize' : 'settingsUpdated',
          'settings.monospaceFont' : 'settingsUpdated',
          'settings.autosaveEnabled' : 'autosaveUpdated',
          'settings.autosaveInterval' : 'autosaveUpdated',
          'settings.renderLaTeX' : 'settingsUpdated',
          'settings.highlightSyntax' : 'settingsUpdated'
        },
        settingsUpdated:function(){
          this.fire("settings-changed",{msg:"settinsg changed"});
        },
        onTopSettingUpdated:function(o,n){
          chrome.app.window.current().setAlwaysOnTop(n);
          this.settingsUpdated();
        },
        autosaveUpdated:function(){
          this.fire("autosave-update",{msg:"autosave updated"});
          this.settingsUpdated();
        }
    });
</script>
</polymer-element>