<polymer-element name="markdown-editor" layout="" vertical="" attributes="markdown">
  <!-- outermost template defines the element's shadow DOM -->
  <template>
    <style>
  #wrapper {
    height:100%;
    width:100%;
  }
  markdown-pane{
    overflow-y:auto;
    border-right:solid 1px #e0e0e0;
  }
  </style>
  <div id="wrapper" layout horizontal flex>
    <textarea id="markdown" value="{{markdown}}" flex></textarea>
    <preview-pane flex markdown="{{markdown}}" previewHeight="{{previewHeight}}" previewPosition="{{previewPosition}}"></preview-pane>
    </div>
  </template>
  <script>
      Polymer('markdown-editor', {
      markdown:"",
      // markdownChanged:function(){
      //   var cursor = this.$.markdown.selectionStart;
      //   if (cursor == this.markdown.length){
      //     app=this;
      //     wrapperHeight = app.$.markdown.style.height;
      //     innerHeight = app.$.markdown.scrollHeight;
      //     ratio = (innerHeight - wrapperHeight)/(app.previewHeight - wrapperHeight);
      //     app.previewPosition = $(app.$.markdown).scrollTop() * ratio;
      //   }
      // },
      ready:function(){
        app = this;
        this.$.markdown.addEventListener("scroll",function(){
          wrapperHeight = app.$.markdown.style.height;
          innerHeight = app.$.markdown.scrollHeight;
          ratio = (innerHeight - wrapperHeight)/(app.previewHeight - wrapperHeight);
          app.previewPosition = $(app.$.markdown).scrollTop() * ratio;
        })
      }
    });
</script>
</polymer-element>